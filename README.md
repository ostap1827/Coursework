# Deduplicated Incremental Backup System (MS SQL Server)

Ця програма призначена для створення ефективних резервних копій баз даних **MS SQL Server**. 
Система використовує алгоритм дедуплікації на рівні блоків (Content-Defined Chunking), 
що дозволяє зберігати лише унікальні фрагменти даних і значно економити дисковий простір.

## Основні можливості
* **Дедуплікація блоків:** Програма розбиває файл резервної копії на змінні блоки за допомогою хешування Rabin-Karp та зберігає лише нові унікальні блоки (SHA256).
* **Метадані в SQLite:** Вся історія копій та індекси блоків зберігаються у локальній базі даних `metadata.db`.
* **Керування копіями:** Можливість перегляду, видалення та повного відновлення бази даних із вибраної точки.

## Вимоги
1.  **.NET 9.0 SDK** — проект розроблений під цільову платформу `net9.0-windows`.
2.  **MS SQL Server** — локальний або запущений у Docker.
3.  **Залежності:** Пакет `Microsoft.Data.SqlClient` для роботи з SQL Server та `Microsoft.Data.Sqlite` для локальної бази.

## Налаштування при використанні Docker

Програма підтримує роботу з MSSQL у Docker-контейнерах. Для цього важливо правильно налаштувати шляхи (Volumes).

### 1. 
    - Створіть папку C:\mssql\backup

### 2. Запуск контейнера
Ви повинні прокинути папку для бекапів з хоста в контейнер, щоб програма могла отримати доступ до створеного сервером `.bak` файлу:
```bash
docker run -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=YourPassword123" \
   -p 1433:1433 \
   -v C:\mssql\backup:/var/opt/mssql/backup \
   -d [mcr.microsoft.com/mssql/server:2022-latest](https://mcr.microsoft.com/mssql/server:2022-latest)

### 3. Інструкція з запуску
    - Клонуйте репозиторій: git clone https://github.com/ostap1827/Coursework
    - У папці з проектом, у терміналі, виконайте команду dotnet run --project Backup/Backup.csproj
    - Якщо проект уже був скомпільвоаним запустити програму можна через Backup/bin/Debug/net9.0-windows/Backup.exe
